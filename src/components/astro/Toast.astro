---
// filepath: src/components/astro/Toast.astro
interface Props {
  lang: string;
}

const { lang } = Astro.props;
const title = lang === "en" ? "Built with Minimal Dependencies!" : "¡Construido con el mínimo de Dependencias!";
const message =
  lang === "en"
    ? "Only Astro + React + Tailwind CSS. No external UI libraries!"
    : "Solo Astro + React + Tailwind CSS. ¡No hay bibliotecas de UI externas!";
---

<div
  id="achievement-toast"
  class="fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-500 ease-out sm:right-5 sm:left-auto sm:translate-x-0"
>
  <div class="absolute top-3 right-3 cursor-pointer" title="Close">
            <svg
          class="w-3 h-3 text-white hover:text-gray-300"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="5"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
  </div>
  <div class="bg-blue-600 dark:bg-green-600 text-white px-6 py-4 rounded-lg shadow-lg w-80 sm:max-w-sm">
    <div class="flex items-center space-x-3">
      <div>
        <p class="font-semibold text-sm pb-3">{title}</p>
        <p class="text-xs opacity-90">{message}</p>
      </div>
    </div>
  </div>
</div>

<script is:inline>
  (function () {
    const toast = document.getElementById("achievement-toast");
    toast.setAttribute("toast-hidden", "true");
    toast.addEventListener("click", toggleToast);

    function toggleToast() {
      if (toast) {
        const isHidden = toast.getAttribute("toast-hidden") === "true";
        if (isHidden) {
          toast.classList.remove("translate-y-full", "opacity-0");
          toast.classList.add("translate-y-0", "opacity-100");
          toast.setAttribute("toast-hidden", "false");
        } else {
          hideToast();
        }
      }
    }
    function hideToast() {
      if (toast) {
        toast.classList.remove("translate-y-0", "opacity-100");
        toast.classList.add("translate-y-full", "opacity-0");
        toast.setAttribute("toast-hidden", "true");
      }
    }

    // Show toast after page loads and user interacts
    let hasInteracted = false;
    const triggerToast = () => {
      if (!hasInteracted) {
        hasInteracted = true;
        toggleToast();
        document.removeEventListener("scroll", triggerToast);
        document.removeEventListener("click", triggerToast);
      }
    };
    document.addEventListener("scroll", triggerToast);
    document.addEventListener("click", triggerToast);
  })();
</script>
